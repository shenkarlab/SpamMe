var express=require("express"),bodyParser=require("body-parser"),path=require("path"),port=process.env.PORT||1337,mongoose=require("mongoose"),consts=require("./assets/consts.js"),app=express(),db=mongoose.connect(consts.MLAB_KEY),conn=mongoose.connection;app.use("/assets",express.static(__dirname+"/public")),app.use(function(e,o,s){o.setHeader("Access-Control-Allow-Origin","*"),o.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),o.setHeader("Access-Control-Allow-Headers","X-Requested-With, Content-Type, Authorization"),o.setHeader("Access-Control-Allow-Credentials",!0),s()}),conn.on("error",function(e){console.log("connection error - "+e)}),conn.once("open",function(){console.log("connected to mongo!")}),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!0})),require("./routes")(app),app.listen(port),console.log("connected to port "+port);